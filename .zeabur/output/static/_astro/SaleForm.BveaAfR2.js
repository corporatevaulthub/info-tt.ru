import{j as e}from"./jsx-runtime.chL-vPbI.js";import{u as b,I as g,a as w,e as j,_ as o}from"./input.tJKriD4v.js";import{r as l}from"./index.l2PZgWEW.js";const v=()=>{const[n,r]=l.useState(!1),a=l.useRef(),i=l.useRef(null),{register:t,handleSubmit:p,reset:d,formState:{errors:c}}=b(),x=m=>{r(!0);const f=i.current.value;j.sendForm("service_fp0qp2n","contact_form",a.current,"76c3fFMb82LKBSmtA").then(u=>{const h={FIELDS:{TITLE:"Новый лид с формы (Акция)",NAME:m.name,PHONE:[{VALUE:f,VALUE_TYPE:"WORK"}],COMMENTS:`
              Комментарий: ${m.comment},
            `}};fetch("https://infott.bitrix24.ru/rest/31/33nrxzpn0pft3vv4/crm.lead.add.json",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(h)}).then(s=>{if(s.ok)r(!1),o.success("Письмо успешно отправлено!",{duration:3e3,position:"bottom-center"}),d();else throw new Error("Ошибка при отправке данных на сервер Bitrix")}).catch(s=>{r(!1),o.error("Упс, что-то пошло не так при отправке данных на сервер Bitrix. Попробуйте ещё раз.",{duration:3e3,position:"bottom-center"}),console.error("Ошибка:",s)})},u=>{r(!1),o.error("Упс, что-то пошло не так при отправке письма на email. Попробуйте ещё раз.",{duration:3e3,position:"bottom-center"}),console.error("Ошибка:",u)})};return e.jsxs("form",{ref:a,onSubmit:p(x),children:[e.jsxs("fieldset",{className:"mb-4 flex w-full max-w-[540px] flex-wrap items-start gap-2 lg:max-w-full",children:[e.jsxs("div",{className:"flex w-full flex-col gap-2 lg:w-auto lg:flex-row",children:[e.jsx("input",{required:!0,className:`input h-[43px] w-full lg:w-[260px] ${c.name&&"border-2 border-red-500"}`,placeholder:"Имя",...t("name",{required:!0})}),e.jsx(g,{required:!0,className:"input h-[43px] w-full lg:w-[260px]",mask:"+{7}(000)000-00-00",name:"phone",placeholder:"Телефон",inputRef:i})]}),e.jsxs("div",{className:"flex w-full flex-col gap-2 lg:w-auto lg:flex-row",children:[e.jsx("input",{className:`input h-[43px] w-full lg:w-[530px] ${c.comment&&"border-2 border-red-500"}`,placeholder:"Комментарий",...t("comment"),style:{verticalAlign:"bottom"}}),e.jsx("button",{className:"button h-[43px] w-full justify-center bg-[#E53737] px-[43px] disabled:pointer-events-none disabled:bg-dark lg:w-[260px]",disabled:n,children:n?"Отправка..":"Отправить"})]})]}),e.jsxs("label",{className:"flex cursor-pointer items-center gap-2 text-[#2E3037]",children:[e.jsx("input",{required:!0,type:"checkbox",...t("accept",{required:!0}),className:"form-checkbox rounded border-[#D5DAE3] text-primary  focus:ring-0"}),e.jsx("span",{className:"text-[12px] font-semibold sm:text-sm",children:"Я согласен с политикой конфиденциальности"})]}),e.jsx(w,{})]})};export{v as default};
